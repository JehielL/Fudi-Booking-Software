@if (showSpinner) {


<section class="dots-container">
  <div class="dot"></div>
  <div class="dot"></div>
  <div class="dot"></div>
  <div class="dot"></div>
  <div class="dot"></div>
</section>




}@else {

<div class="hero-section">
  <!-- Fondo con transición -->
  <div class="background-layer" 
       [ngStyle]="{ 'background-image': 'url(' + currentImage + ')' }">
  </div>
  <div class="background-layer-next" 
       [ngStyle]="{ 'background-image': 'url(' + nextImage + ')' }"
       [class.show]="showNextLayer">
  </div>
  <div class="hero-overlay"></div>

  <!-- Contenido centrado -->
  <div class="hero-content">
    <h1 class="hero-title">Reserva tu mesa en segundos</h1>
    <p class="hero-subtitle">Los mejores restaurantes de tu ciudad, al alcance de un click</p>
    
    <!-- Barra de búsqueda moderna -->
    <div class="search-wrapper">
      <div class="search-box">
        <i class="bi bi-search search-icon"></i>
        <input type="search" 
               class="search-input" 
               placeholder="¿Qué restaurante buscas?" 
               aria-label="Buscar"
               (input)="buscar($any($event.target).value)">
      </div>
      
      <!-- Resultados de búsqueda - compacto -->
      @if (resultadosBusqueda.length > 0) {
      <div class="search-results">
        @for (restaurantes of resultadosBusqueda; track restaurantes) {
        <a [routerLink]="['/restaurant', restaurantes.id, 'detail']" class="search-result-item">
          <i class="bi bi-shop"></i>
          <span [innerHTML]="highlightSearchTerm(restaurantes.name, searchTerm)"></span>
          <i class="bi bi-chevron-right"></i>
        </a>
        }
        @if (puedeMostrarMas) {
        <button class="btn-show-more" (click)="mostrarMas()">
          Ver más resultados
        </button>
        }
      </div>
      }
    </div>

    <!-- Accesos rápidos con GIF hover -->
    <div class="quick-links">
      <a routerLink="/restaurant-list" class="quick-link">
        <div class="quick-link-bg" style="background-image: url('https://media3.giphy.com/media/t3cAV2HGSSMljwOpS9/200w.gif?cid=6c09b952r52j9vaj92kvkmn6wcm4ibcr4s7e9ixdk4l48q5c&ep=v1_gifs_search&rid=200w.gif&ct=g')"></div>
        <div class="quick-link-content">
          <i class="bi bi-grid-3x3-gap"></i>
          <span>Restaurantes</span>
        </div>
      </a>
      <a routerLink="/ranking" class="quick-link">
        <div class="quick-link-bg" style="background-image: url('https://cdn.dribbble.com/userupload/19780573/file/original-f539c7b5bcf80ff45985124ec1395f74.gif')"></div>
        <div class="quick-link-content">
          <i class="bi bi-trophy"></i>
          <span>Top rated</span>
        </div>
      </a>
      <a routerLink="/discounts" class="quick-link">
        <div class="quick-link-bg" style="background-image: url('https://cdn-icons-gif.flaticon.com/12707/12707727.gif')"></div>
        <div class="quick-link-content">
          <i class="bi bi-percent"></i>
          <span>Ofertas</span>
        </div>
      </a>
      <a routerLink="/zonas" class="quick-link">
        <div class="quick-link-bg" style="background-image: url('https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExdjl5bnZ1NGduM3o0MzZ0N21vbGY4a3JkNmQzd3I2cncxOWNpeTRuYiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/lPdnsmJjxXuXbDn6yq/giphy.gif')"></div>
        <div class="quick-link-content">
          <i class="bi bi-geo-alt"></i>
          <span>Por zona</span>
        </div>
      </a>
    </div>
  </div>
</div>


<div class="container-fluid">

  <div data-aos="fade-up" class="text-center mb-3">
    <h2 class="section-title">
      <i class="bi bi-stars me-2"></i>Recién Añadidos
    </h2>
  </div>

  <div class="container" id="custom-cards">

    <div data-aos="fade-up" class="row row-cols-1 row-cols-lg-3 align-items-stretch py-3">
      @for (restaurant of restaurants; track $index) {
      <div class="col mt-3">
        <a [routerLink]="['/restaurant', restaurant.id, 'detail']">
          <div class="card card-cover h-150 w-100 overflow-hidden text-bg-dark rounded-4 shadow-lg position-relative">
            <div class="image-overlay"
              [style.background-image]="'url(' + (restaurant.imageUrl.startsWith('http') ? restaurant.imageUrl : 'http://localhost:8080/files/' + restaurant.imageUrl) + ')'"
              style="background-size: cover; background-position: center; height: 200px;">
            </div>
            <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 position-relative">
              <h3 class="mt-auto mb-3 text-center fs-5 fw-bold"> {{ restaurant.name }}</h3>
              <ul class="d-flex justify-content-between list-unstyled mt-auto">
                <li class="d-flex align-items-center me-3">
                  <i class="bi bi-geo-alt"></i> {{ restaurant.address }}
                </li>
                <li class="ms-3 d-flex align-items-center">
                  <i class="bi bi-star"></i> {{restaurant.averageRating}}
                </li>
              </ul>
            </div>
          </div>
        </a>

      </div>
      }
    </div>

  </div>
</div>

<div class=" container-fluid justify-content-center ">

  <div class="container" id="custom-cards">
    <div data-aos="fade-up" class="text-center mb-3">
      <h2 class="section-title">
        <i class="bi bi-award me-2"></i>Recomendaciones
      </h2>
    </div>

    <div data-aos="fade-up"
      class="row row-cols-1 row-cols-md-3 g-3 justify-content-center align-items-center py-3 mt-3">


      <div class="col ">
        <div
          class="card card-covercustom h-100 w-100 overflow-hidden text-bg-dark rounded-4 shadow-lg position-relative">
          <div class="image-overlay"
            style="background-image: url('https://www.srperro.com/media/negocio/5b49b1ea-9bdf-41a2-864b-aff9aa695385.original.jpg');">
          </div>

          <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 position-relative">
            <h3 class="mt-1 mb-3 text-center fs-1 fw-bold">Arya Café</h3>
            <div class="flex-grow-1 d-flex justify-content-center align-items-center">
              <p class="mt-2 px-3">Brunch tranquilo con una dueña muy particular, Menú fresco y saludable, una
                propuesta diferente en un Madrid actual. </p>

            </div>
            <ul class="d-flex justify-content-between list-unstyled mt-auto">

              <li class="d-flex align-items-center me-3">
                <i class="bi bi-geo-alt"> </i> Madrid - Moncloa

              </li>
              <li class="ms-3 d-flex align-items-center">
                <i class="bi bi-currency-euro"> </i> 20 /<i class="bi bi-person"></i>

              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col">
        <div
          class="card card-covercustom h-100 w-100 overflow-hidden text-bg-dark rounded-4 shadow-lg position-relative">
          <div class="image-overlay"
            style="background-image: url('https://doppelgangerbar.com/wp-content/uploads/2021/04/Puesto3_900X900.jpg');">
          </div>
          <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 position-relative">
            <h3 class="mt-1 mb-3 text-center fs-1 fw-bold">Doppelgänger Bar</h3>
            <div class="flex-grow-1 d-flex justify-content-center align-items-center">
              <p class=" px-1">El mas disruptivo puesto de mercado, con una propuesta tan alocada como su chef,
                presenta uno de nuestros sitios favoritos donde hacer algo mas que solo salir a comer en Madrid.</p>

            </div>
            <ul class="d-flex justify-content-between list-unstyled mt-auto">

              <li class="d-flex align-items-center me-3">
                <i class="bi bi-geo-alt ms-1"> </i> Madrid - Antón Martín

              </li>
              <li class="ms-3 d-flex align-items-center">
                <i class="bi bi-currency-euro"> </i> 20 /<i class="bi bi-person"></i>

              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col">
        <div
          class="card card-covercustom h-100 w-100 overflow-hidden text-bg-dark rounded-4 shadow-lg position-relative">
          <div class="image-overlay"
            style="background-image: url('https://menu.tipsipro.com/media/uploads/DSC00493.jpg');">
          </div>
          <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 position-relative">
            <h3 class="mt-1 mb-3 text-center fs-1 fw-bold">Nomade Café</h3>
            <div class="flex-grow-1 d-flex justify-content-center align-items-center">
              <p class="mt-2 px-3">El Brunch perfecto para un desayuno, luego de una noche de fiestas por el centro de
                Madrid, la mejor opción Calidad/ Precio de Lavapíes </p>

            </div>
            <ul class="d-flex justify-content-between list-unstyled mt-auto">

              <li class="d-flex align-items-center me-3">
                <i class="bi bi-geo-alt ms-1"> </i> Madrid - Lavapíes

              </li>
              <li class="ms-3 d-flex align-items-center">
                <i class="bi bi-currency-euro"> </i> 20 /<i class="bi bi-person"></i>

              </li>
            </ul>
          </div>
        </div>
      </div>


    </div>
  </div>



</div>

<!-- Parallax Hero Banner -->
<div class="parallax-banner d-flex align-items-center justify-content-center">
  <div class="overlay"></div>
  <div data-aos="fade-up" class="container position-relative text-white">
    <div class="row justify-content-center">
      <div class="col-12 col-md-10 col-lg-8 text-center">
        <h1 class="parallax-title mb-4">Tu próxima experiencia gastronómica te espera</h1>
        <p class="parallax-subtitle mb-4">Descubre los mejores restaurantes y reserva en segundos</p>
        <button class="btn-glass btn-lg" routerLink="/user/login">
          <i class="bi bi-calendar-check me-2"></i>Reservar ahora
        </button>
      </div>
    </div>
  </div>
</div>
<div class="container-fluid">

  <div class="text-center mb-3">
    <h2 class="section-title">
      <i class="bi bi-compass me-2"></i>Experiencias
    </h2>
  </div>

  <div class="container" id="custom-cards">

    <div data-aos="fade-up" class="row row-cols-1 row-cols-lg-3 align-items-stretch py-3">

      <div class="col mt-3">
        <div class="card card-cover h-100 w-100 overflow-hidden text-bg-dark rounded-4 shadow-lg position-relative">
          <div class="image-overlay"
            style="background-image: url('https://streetfoodjapan.com/wp-content/uploads/imgShinjuku.jpg');"></div>
          <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 position-relative">
            <h3 class="mt-auto mb-3 text-center fs-5 fw-bold">Noches Asiatícas</h3>
            <ul class="d-flex justify-content-between list-unstyled mt-auto">

              <li class="d-flex align-items-center me-3">
                <i class="bi bi-geo-alt"> </i> Madrid

              </li>
              <li class="ms-3 d-flex align-items-center">
                <i class="bi bi-calendar3"> </i> Feb 2025

              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col mt-3">
        <div class="card card-cover h-100 w-100 overflow-hidden text-bg-dark rounded-4 shadow-lg position-relative">
          <div class="image-overlay"
            style="background-image: url('https://tasteofluxury.ca/wp-content/uploads/2023/04/fine-dining-in-the-best-restaurants.jpg?w=672&h=372&crop=1');">
          </div>
          <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 position-relative">
            <h3 class="mt-auto mb-3 text-center fs-5 fw-bold">Experiencias Michelín</h3>
            <ul class="d-flex justify-content-between list-unstyled mt-auto">

              <li class="d-flex align-items-center me-3">
                <i class="bi bi-geo-alt"> </i> Madrid

              </li>
              <li class="ms-3 d-flex align-items-center">
                <i class="bi bi-calendar3"> </i> Feb 2025

              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col mt-3">
        <div class="card card-cover h-100 w-100 overflow-hidden text-bg-dark rounded-4 shadow-lg position-relative">
          <div class="image-overlay"
            style="background-image: url('https://farm6.staticflickr.com/5686/22238573266_32e6fc7c68_o.jpg');"></div>
          <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 position-relative">
            <h3 class="mt-auto mb-3 text-center fs-5 fw-bold">Raíces & Mercado</h3>
            <ul class="d-flex justify-content-between list-unstyled mt-auto">

              <li class="d-flex align-items-center me-3">
                <i class="bi bi-geo-alt"> </i> Madrid

              </li>
              <li class="ms-3 d-flex align-items-center">
                <i class="bi bi-calendar3"> </i> Feb 2025

              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col mt-3">
        <div class="card card-cover h-100 w-100 overflow-hidden text-bg-dark rounded-4 shadow-lg position-relative">
          <div class="image-overlay"
            style="background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTmvX-xdQQ4Fn4qCI-9hSSReaHZTX00cCfLFQ&s');">
          </div>
          <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 position-relative">
            <h3 class="mt-auto mb-3 text-center fs-5 fw-bold">Chef en Casa</h3>
            <ul class="d-flex justify-content-between list-unstyled mt-auto">

              <li class="d-flex align-items-center me-3">
                <i class="bi bi-geo-alt"> </i> Madrid

              </li>
              <li class="ms-3 d-flex align-items-center">
                <i class="bi bi-calendar3"> </i> Feb 2025

              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col mt-3">
        <div class="card card-cover h-100 w-100 overflow-hidden text-bg-dark rounded-4 shadow-lg position-relative">
          <div class="image-overlay"
            style="background-image: url('https://offloadmedia.feverup.com/madridsecreto.co/wp-content/uploads/2019/04/08102038/83867458_2270916876545880_2152995240957275354_n.jpg');">
          </div>
          <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 position-relative">
            <h3 class="mt-auto mb-3 text-center fs-5 fw-bold">Brunchies...¡Porque sí!</h3>
            <ul class="d-flex justify-content-between list-unstyled mt-auto">

              <li class="d-flex align-items-center me-3">
                <i class="bi bi-geo-alt"> </i> Madrid

              </li>
              <li class="ms-3 d-flex align-items-center">
                <i class="bi bi-calendar3"> </i> Nov 2025

              </li>
            </ul>
          </div>
        </div>
      </div>

      <div class="col mt-3">
        <div class="card card-cover h-100 w-100 overflow-hidden text-bg-dark rounded-4 shadow-lg position-relative">
          <div class="image-overlay"
            style="background-image: url('https://i0.wp.com/www.showmoonmag.com/wp-content/uploads/2018/12/Santos-y-Desamparados_-El-Culto-al-Co%CC%81ctel-Santos.jpg?resize=900%2C601&ssl=1');">
          </div>
          <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 position-relative">
            <h3 class="mt-auto mb-3 text-center fs-5 fw-bold">De copas y otras cosas.</h3>
            <ul class="d-flex justify-content-between list-unstyled mt-auto">

              <li class="d-flex align-items-center me-3">
                <i class="bi bi-geo-alt"> </i> Madrid

              </li>
              <li class="ms-3 d-flex align-items-center">
                <i class="bi bi-calendar3"> </i> Feb 2025

              </li>
            </ul>
          </div>
        </div>
      </div>


    </div>
  </div>
</div>

<!-- Sección Promociones -->
<div class="container px-4 py-3" *ngIf="restaurantsWithPromotions.length > 0">
  <div class="text-center mb-3">
    <h2 class="section-title">
      <i class="bi bi-gift-fill me-2"></i>Promociones Especiales
    </h2>
  </div>

  <div class="row row-cols-1 row-cols-lg-3 align-items-stretch g-4 promo-carousel" [class.transitioning]="promoTransitioning">
    <div class="col" *ngFor="let item of getCurrentPagePromos(); trackBy: trackByRestaurant">
      <div class="card card-cover h-100 w-100 overflow-hidden text-bg-dark rounded-4 shadow-lg position-relative">
        <!-- Imagen del restaurante -->
        <div class="image-overlay" 
             [style.background-image]="'url(' + (item.restaurant.imageUrl.startsWith('http') ? item.restaurant.imageUrl : 'http://localhost:8080/files/' + item.restaurant.imageUrl) + ')'">
        </div>
        
        <!-- Tag de promoción -->
        <div class="promo-tag-overlay" 
             [style.background-color]="getPromotionColor(item.promotions[0].type)"
             *ngIf="item.promotions.length > 0 && item.promotions[0].type && promotionConfig[item.promotions[0].type]">
          <i [class]="getPromotionIcon(item.promotions[0].type) + ' me-1'"></i>
          {{ promotionConfig[item.promotions[0].type].label }}
        </div>

        <!-- Contenido de la card -->
        <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1 position-relative">
          <h3 class="mt-auto mb-3 text-center fs-5 fw-bold">{{ item.restaurant.name }}</h3>
          <ul class="d-flex justify-content-between list-unstyled mt-auto">
            <li class="d-flex align-items-center me-3">
              <i class="bi bi-geo-alt me-1"></i> {{ item.restaurant.address }}
            </li>
            <li class="ms-3 d-flex align-items-center">
              <i class="bi bi-tag-fill me-1"></i> {{ item.promotions.length }} oferta{{ item.promotions.length > 1 ? 's' : '' }}
            </li>
          </ul>
          <div class="mt-2 text-center">
            <a [routerLink]="['/restaurant', item.restaurant.id, 'detail']" class="btn-promo-detail">Ver detalles</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Controles de paginación -->
  <div class="d-flex justify-content-center align-items-center mt-4 gap-3" *ngIf="restaurantsWithPromotions.length > promosPerPage">
    <button 
      class="btn-promo-pagination" 
      (click)="prevPromoPage()" 
      [disabled]="!hasPrevPromoPage()">
      <i class="bi bi-chevron-left"></i>
    </button>
    <span class="promo-page-indicator">
      {{ currentPromoPage + 1 }} / {{ Math.ceil(restaurantsWithPromotions.length / promosPerPage) }}
    </span>
    <button 
      class="btn-promo-pagination" 
      (click)="nextPromoPage()" 
      [disabled]="!hasNextPromoPage()">
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</div>



<app-home-sin-log></app-home-sin-log>




}